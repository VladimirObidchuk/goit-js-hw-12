{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function fetchImage({\n  urlBase,\n  apiKey,\n  searchExpression,\n  type,\n  orientation,\n  safesearch,\n  page,\n  perPage,\n}) {\n  const response = await axios.get(urlBase, {\n    params: {\n      key: apiKey,\n      q: searchExpression,\n      image_type: type,\n      orientation: orientation,\n      safesearch: safesearch,\n      page: page,\n      per_page: perPage,\n    },\n  });\n\n  console.log(' response', response);\n  return response;\n}\n\nexport default fetchImage;\n","function renderGaleryImg(gallery) {\n  return gallery\n    .map(item => {\n      return `<li class=\"gallery-item\">\n      <a href=\"${item.largeImageURL}\" class=\"gallery-link\">\n        <img class=\"gallery-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" data-source=\"${item.tags}\"\n        data-title=\"${item.tags}\"  height=\"255\" width=\"430\"/>\n      </a> \n          <ul class=\"sublist\">\n        <li class=\"sublist-item\">\n            <p class=\"sublist-title\">Likes</p>\n            <p class=\"sublist-text\">${item.likes}</p>\n         </li>\n        <li class=\"sublist-item\">\n            <p class=\"sublist-title\">Viewes</p>\n            <p class=\"sublist-text\">${item.views}</p>\n         </li>\n         <li class=\"sublist-item\">\n            <p class=\"sublist-title\">Comments</p>\n            <p class=\"sublist-text\">${item.comments}</p>\n        </li>\n         <li class=\"sublist-item\">\n            <p class=\"sublist-title\">Download</p>\n            <p class=\"sublist-text\">${item.downloads}</p>\n        </li>\n    </ul>\n      </li>`;\n    })\n    .join('');\n}\nexport default renderGaleryImg;\n","import fetchImage from './js/pixabay-api.js';\nimport renderGaleryImg from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst perPage = 15;\nlet page = 1;\n\nconst parametersObject = {\n  urlBase: 'https://pixabay.com/api/',\n  apiKey: '48839660-7b8b283c3689698998fc631e5',\n  searchExpression: null,\n  type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: page,\n  perPage: perPage,\n};\n\nclass MessageAlert {\n  constructor(title, message, position, timeout, transitionIn, transitionOut) {\n    this.title = title;\n    this.message = message;\n    this.position = position;\n    this.timeout = timeout;\n    this.transitionIn = transitionIn;\n    this.transitionOut = transitionOut;\n  }\n\n  updateMessage(message) {\n    this.message = message;\n  }\n\n  error() {\n    iziToast.error({\n      title: this.title,\n      message: this.message,\n      position: this.position,\n      timeout: this.timeout,\n      transitionIn: this.transitionIn,\n      transitionOut: this.transitionOut,\n    });\n  }\n  info() {\n    iziToast.info({\n      title: this.title,\n      message: this.message,\n      position: this.position,\n      timeout: this.timeout,\n      transitionIn: this.transitionIn,\n      transitionOut: this.transitionOut,\n    });\n  }\n}\n\nclass ErrorAlert extends MessageAlert {\n  constructor(message) {\n    super('Error', message, 'topRight', 5000, 'fadeInDown', 'fadeOutUp');\n  }\n}\nclass InfoAlert extends MessageAlert {\n  constructor(message) {\n    super('info', message, 'topRight', 5000, 'blue', 'fadeInDown', 'fadeOutUp');\n  }\n}\n\nconst errorAlertInstance = new ErrorAlert();\nconst InfoAlertInstans = new InfoAlert();\n\nconst imgList = document.querySelector('.js-gallery');\nconst searchForm = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst searchImageBtn = document.querySelector('.js-search-btn');\nconst pageUpBtn = document.querySelector('.js-pageup-btn');\n\nsearchForm.addEventListener('submit', onSearch);\nsearchImageBtn.addEventListener('click', onLoadMore);\n\nlet searchData = '';\nlet galleryInner = null;\n\nfunction searchInputExpretion() {\n  const searchInput = document.querySelector('.js-form-input');\n  searchData = searchInput.value.replace(/\\d+/g, '').replace(/ /g, '+').trim();\n\n  if (searchData === '') {\n    InfoAlertInstans.updateMessage('Please enter a search term');\n    InfoAlertInstans.info();\n    return;\n  }\n  return searchData;\n}\n\nasync function onSearch(e) {\n  e.preventDefault();\n  const searchExpression = searchInputExpretion();\n\n  if (!searchExpression) {\n    return;\n  }\n  parametersObject.searchExpression = searchInputExpretion();\n\n  try {\n    loader.style.display = 'inline-block';\n    const gallery = await fetchImage(parametersObject);\n    if (gallery.data.hits.length === 0) {\n      errorAlertInstance.updateMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      searchImageBtn.style.display = 'none';\n      errorAlertInstance.error();\n      searchForm.reset();\n      imgList.innerHTML = '';\n      return;\n    }\n    imgList.innerHTML = '';\n    imgList.insertAdjacentHTML('beforeend', renderGaleryImg(gallery.data.hits));\n    searchImageBtn.style.display = 'block';\n\n    galleryInner = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      animationSpeed: 300,\n      animationSlide: true,\n      overlay: true,\n      overlayOpacity: 0.8,\n    });\n\n    galleryInner.on('shown.simplelightbox', () => {\n      const lightboxContainer = document.querySelector('.simple-lightbox');\n      if (!lightboxContainer) {\n        return;\n      }\n    });\n    galleryInner.refresh();\n  } catch (error) {\n    searchImageBtn.style.display = 'none';\n    pageUpBtn.style.display = 'none';\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n  searchForm.reset();\n}\n\nfunction onLoadMore() {\n  parametersObject.page += 1;\n  loader.style.display = 'block';\n\n  galleryInner.refresh();\n\n  fetchImage(parametersObject).then(gallery => {\n    imgList.insertAdjacentHTML(\n      'beforeend',\n      renderGaleryImg(gallery.data.hits, page)\n    );\n\n    galleryInner.refresh();\n    const totalPages = Math.ceil(gallery.data.totalHits / perPage);\n    const getHeightImgCard = () =>\n      document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n      top: getHeightImgCard().height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    loader.style.display = 'none';\n    pageUpBtn.style.display = 'flex';\n    if (parametersObject.page === totalPages) {\n      InfoAlertInstans.updateMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      InfoAlertInstans.info();\n      loader.style.display = 'none';\n      searchImageBtn.style.display = 'none';\n    }\n  });\n}\n"],"names":["fetchImage","urlBase","apiKey","searchExpression","type","orientation","safesearch","page","perPage","response","axios","renderGaleryImg","gallery","item","parametersObject","MessageAlert","title","message","position","timeout","transitionIn","transitionOut","iziToast","ErrorAlert","InfoAlert","errorAlertInstance","InfoAlertInstans","imgList","searchForm","loader","searchImageBtn","pageUpBtn","onSearch","onLoadMore","searchData","galleryInner","searchInputExpretion","e","SimpleLightbox","error","totalPages","getHeightImgCard"],"mappings":"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"}